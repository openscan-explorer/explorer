<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="Openscan" content="" />

    <link id="favicon" rel="icon" href="/openscan-logo.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;800&display=swap" rel="stylesheet">

    <link id="apple-touch-icon" rel="apple-touch-icon" href="/openscan-logo.png" />
    <link id="manifest" rel="manifest" href="/manifest.json" />
    <link rel="search" type="application/opensearchdescription+xml" title="OpenScan" href="/opensearch.xml" />

    <title>Openscan</title>
  </head>
  <body>
    <script>
      // Handle MetaMask block explorer URL redirect
      // MetaMask constructs: /tx/0x...#/{chainId}/ or /address/0x...#/{chainId}/
      // OpenScan needs: /#/{chainId}/tx/0x... or /#/{chainId}/address/0x...
      (function() {
        var path = window.location.pathname;
        var hash = window.location.hash;

        // Match patterns like /tx/0x... or /address/0x...
        var txMatch = path.match(/^\/tx\/(0x[a-fA-F0-9]+)/);
        var addrMatch = path.match(/^\/address\/(0x[a-fA-F0-9]{40})/);

        // Extract chain ID from hash (e.g., #/1/ or #/10/)
        var chainMatch = hash.match(/^#\/(\d+)/);

        if (txMatch && chainMatch) {
          window.location.replace('/#/' + chainMatch[1] + '/tx/' + txMatch[1]);
        } else if (addrMatch && chainMatch) {
          window.location.replace('/#/' + chainMatch[1] + '/address/' + addrMatch[1]);
        }
      })();
    </script>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script type="module" src="/src/index.tsx"></script>
  </body>
</html>
